buildscript {
    repositories {
        mavenCentral()
        jcenter()
    }
    dependencies {
        classpath("org.springframework.boot:spring-boot-gradle-plugin:1.3.0.RELEASE")
        classpath 'org.hidetake:gradle-ssh-plugin:1.1.3'
    }
}

plugins {
    id 'org.hidetake.ssh' version '1.1.3'
}

//Check OS for correct usage of npm, bower and grunt commands

import org.gradle.api.tasks.Exec
import org.apache.tools.ant.taskdefs.condition.Os

ext {
	npmCommand = Os.isFamily(Os.FAMILY_WINDOWS) ? 'npm.cmd' : 'npm'
	bowerCommand = Os.isFamily(Os.FAMILY_WINDOWS) ? 'bower.cmd' : 'bower'
	gruntCommand  = Os.isFamily(Os.FAMILY_WINDOWS) ? 'grunt.cmd' : 'grunt'
}

logger.lifecycle "                            # #### ####"
logger.lifecycle  "                          ### \\/#|### |/####"
logger.lifecycle  "                         ##\\/#/ \\||/##/_/##/_#"
logger.lifecycle  "                       ###  \\/###|/ \\/ # ###"
logger.lifecycle  "                     ##_\\_#\\_\\## | #/###_/_####"
logger.lifecycle  "                    ## #### # \\ #| /  #### ##/##"
logger.lifecycle  "                     __#_--###`  |{,###---###-~"
logger.lifecycle  "                               \\ }{"
logger.lifecycle  "                                }}{"
logger.lifecycle  "                                }}{"
logger.lifecycle  "                           ejm  {{}"
logger.lifecycle  "                          , -=-~{ .-^- _"
logger.lifecycle  "                                `}"
logger.lifecycle  "                                 {"
logger.lifecycle  "88     88\"\"Yb 88        db    88b 88 888888        db        888888 88\"\"Yb 888888 888888"
logger.lifecycle  "88     88__dP 88       dPYb   88Yb88   88         dPYb         88   88__dP 88__   88__"
logger.lifecycle  "88     88\"\"\"  88  .o  dP__Yb  88 Y88   88        dP__Yb        88   88\"Yb  88\"\"   88\"\""
logger.lifecycle  "88     88     88ood8 dP\"\"\"\"Yb 88  Y8   88       dP\"\"\"\"Yb       88   88  Yb 888888 888888"

logger.lifecycle "Available processors: " + Runtime.getRuntime().availableProcessors()
try {
  logger.lifecycle "node version: " + ("node --version".execute().text.trim())
} catch (Exception e) {
  logger.warn("Didn't find node to determine the used versions.")
}
try {
  logger.lifecycle "npm version: " + ((npmCommand +" -version").execute().text.trim())
} catch (Exception e) {
  logger.warn("Didn't find npm to determine the used versions.")
}
logger.lifecycle "java version: " + JavaVersion.current()

apply plugin: 'eclipse'
apply plugin: 'org.hidetake.ssh'
apply plugin: 'project-report'

repositories {
    mavenCentral()
    maven {
        url "http://repo.spring.io/milestone"
    }
}

remotes {
    ipatHost {
        host = 'iplantatree.org'
        user = 'ipat'
        identity = file("${System.properties['user.home']}/.ssh/id_rsa")
    }
}

version = '0.1'

